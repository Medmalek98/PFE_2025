"use strict";(self.webpackChunkmantis_free_version=self.webpackChunkmantis_free_version||[]).push([[901],{1901:(g,l,i)=>{i.r(l),i.d(l,{ActionComponent:()=>v});var m=i(5779),d=i(2228),u=i(177),r=i(4341),b=i(1360),t=i(3953),p=i(6209);function _(s,h){if(1&s){const e=t.RV6();t.j41(0,"tr")(1,"td",15),t.EFF(2),t.k0s(),t.j41(3,"td",15),t.EFF(4),t.k0s(),t.j41(5,"td",15)(6,"button",32),t.bIt("click",function(){const o=t.eBV(e).$implicit,a=t.XpG();return t.Njj(a.ouvrirAction(o))}),t.nrm(7,"i",33),t.k0s(),t.j41(8,"button",34),t.bIt("click",function(){const o=t.eBV(e).$implicit,a=t.XpG();return t.Njj(a.deleteAction(o.idactions))}),t.nrm(9,"i",35),t.k0s()()()}if(2&s){const e=h.$implicit;t.R7$(2),t.JRh(e.idactions),t.R7$(2),t.JRh(e.nameactions)}}let v=(()=>{class s{constructor(e,n){this.actionController=e,this.messageService=n,this.actions=[],this.newAction={idactions:null,nameactions:"",version:0}}ngOnInit(){this.getActions()}getActions(){this.actionController.getTotalaction().subscribe(e=>{this.actions=e},e=>{this.messageService.add({severity:"error",summary:"Erreur",detail:"Erreur lors du chargement des actions"}),console.error("Erreur lors du chargement des actions",e)})}addAction(){this.actionController.addAction(this.newAction).subscribe(e=>{this.actions.push(e),this.newAction={idactions:null,nameactions:"",version:0};const n=document.getElementById("addReclamationModal");n&&(d.aF.getInstance(n)||new d.aF(n)).hide();const o=document.querySelector(".modal-backdrop");o&&o.remove(),document.body.classList.remove("modal-open"),document.body.style.overflow="",document.body.style.paddingRight="",this.messageService.add({severity:"success",summary:"Succ\xe8s",detail:"Action ajout\xe9e avec succ\xe8s"})},e=>{this.messageService.add({severity:"error",summary:"Erreur",detail:"Erreur lors de l'ajout de l'action"}),console.error("Erreur lors de l'ajout de l'action",e)})}ouvrirAction(e){this.newAction={...e},new d.aF(document.getElementById("editReclamationModal")).show()}saveEdit(){this.actionController.updateAction(this.newAction).subscribe(()=>{this.messageService.add({severity:"success",summary:"Succ\xe8s",detail:"Action mise \xe0 jour avec succ\xe8s"}),this.getActions(),d.aF.getInstance(document.getElementById("editReclamationModal")).hide()},e=>{this.messageService.add({severity:"error",summary:"Erreur",detail:"Erreur lors de la mise \xe0 jour de l'action"}),console.error("Erreur lors de la mise \xe0 jour de l'action",e)})}deleteAction(e){confirm("\xcates-vous s\xfbr de vouloir supprimer cette action ?")&&this.actionController.deleteAction(e).subscribe(()=>{this.messageService.add({severity:"success",summary:"Succ\xe8s",detail:"Action supprim\xe9e avec succ\xe8s"}),console.log("Action supprim\xe9e avec succ\xe8s"),this.getActions()},n=>{this.messageService.add({severity:"error",summary:"Erreur",detail:"Erreur lors de la suppression de l'action"}),console.error("Erreur lors de la suppression de l'action",n)})}static{this.\u0275fac=function(n){return new(n||s)(t.rXU(p.Z),t.rXU(m.bg))}}static{this.\u0275cmp=t.VBU({type:s,selectors:[["app-action"]],standalone:!0,features:[t.Jv_([m.bg]),t.aNF],decls:65,vars:3,consts:[["rel","stylesheet","href",t.wXG`https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css`],["rel","stylesheet","href",t.wXG`https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css`],[1,"container"],[1,"row",2,"background-color","rgba(255, 255, 255, 0.8)","border","2px solid #aaaf00","border-radius","10px"],[1,"col-12"],[1,"border","border-1","border-light","bg-white","p-3",2,"border-radius","10px"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],["data-bs-toggle","modal","data-bs-target","#addReclamationModal",1,"btn","btn-primary"],[1,"ms-2"],[1,"bi","bi-plus"],[1,"mb-4"],[1,"col-md-12","col-xl-12"],[1,"card","tbl-card"],[1,"table-responsive"],[1,"table","table-hover","mb-0"],[1,"text-center"],[4,"ngFor","ngForOf"],["id","addReclamationModal","tabindex","-1","aria-labelledby","addReclamationModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","addReclamationModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],["id","reclamationForm"],[1,"mb-3"],["for","reclamationTitle",1,"form-label"],["type","text","id","reclamationTitle","name","txt_reclamation","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"modal-footer"],["type","button","id","saveReclamation",1,"btn","btn-primary",3,"click"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["id","editReclamationModal","tabindex","-1","aria-labelledby","editReclamationModal","aria-hidden","true",1,"modal","fade"],[1,"btn","btn-sm","btn-warning",2,"border-radius","60px",3,"click"],[1,"bi","bi-pencil-square"],[1,"btn","btn-sm","btn-danger","ms-2",2,"border-radius","60px",3,"click"],[1,"bi","bi-x-octagon"]],template:function(n,o){1&n&&(t.nrm(0,"link",0)(1,"link",1)(2,"p-toast"),t.j41(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6)(8,"h3"),t.EFF(9,"Ajouter Action "),t.k0s(),t.j41(10,"button",7),t.EFF(11," Ajouter "),t.j41(12,"span",8),t.nrm(13,"i",9),t.k0s()()()()()(),t.nrm(14,"div",10),t.j41(15,"div",11)(16,"div",12)(17,"div",13)(18,"table",14)(19,"thead")(20,"tr")(21,"th",15),t.EFF(22,"ID Actions"),t.k0s(),t.j41(23,"th",15),t.EFF(24,"Nom Actions"),t.k0s(),t.j41(25,"th",15),t.EFF(26,"Actions"),t.k0s()()(),t.j41(27,"tbody"),t.DNE(28,_,10,2,"tr",16),t.k0s()()()()(),t.j41(29,"div",17)(30,"div",18)(31,"div",19)(32,"div",20)(33,"h5",21),t.EFF(34,"Ajouter Action"),t.k0s(),t.nrm(35,"button",22),t.k0s(),t.j41(36,"div",23)(37,"form",24)(38,"div",25)(39,"label",26),t.EFF(40,"Titre d'action"),t.k0s(),t.j41(41,"input",27),t.mxI("ngModelChange",function(c){return t.DH7(o.newAction.nameactions,c)||(o.newAction.nameactions=c),c}),t.k0s()()()(),t.j41(42,"div",28)(43,"button",29),t.bIt("click",function(){return o.addAction()}),t.EFF(44,"Ajouter"),t.k0s(),t.j41(45,"button",30),t.EFF(46,"Fermer"),t.k0s()()()()()(),t.j41(47,"div",31)(48,"div",18)(49,"div",19)(50,"div",20)(51,"h5",21),t.EFF(52,"Modifier Action"),t.k0s(),t.nrm(53,"button",22),t.k0s(),t.j41(54,"div",23)(55,"form",24)(56,"div",25)(57,"label",26),t.EFF(58,"Titre d'action"),t.k0s(),t.j41(59,"input",27),t.mxI("ngModelChange",function(c){return t.DH7(o.newAction.nameactions,c)||(o.newAction.nameactions=c),c}),t.k0s()()()(),t.j41(60,"div",28)(61,"button",29),t.bIt("click",function(){return o.saveEdit()}),t.EFF(62,"Ajouter"),t.k0s(),t.j41(63,"button",30),t.EFF(64,"Fermer"),t.k0s()()()()()),2&n&&(t.R7$(28),t.Y8G("ngForOf",o.actions),t.R7$(13),t.R50("ngModel",o.newAction.nameactions),t.R7$(18),t.R50("ngModel",o.newAction.nameactions))},dependencies:[u.MD,u.Sq,r.YN,r.qT,r.me,r.BC,r.cb,r.YS,r.vS,r.cV,b.MB,b.y8]})}}return s})()}}]);
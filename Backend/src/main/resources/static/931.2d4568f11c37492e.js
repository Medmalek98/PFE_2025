"use strict";(self.webpackChunkmantis_free_version=self.webpackChunkmantis_free_version||[]).push([[931],{2931:(g,l,i)=>{i.r(l),i.d(l,{ProchainActionComponent:()=>_});var m=i(177),a=i(4341),u=i(5779),h=i(1360),d=i(2228),t=i(3953),p=i(1881);function b(c,v){if(1&c){const o=t.RV6();t.j41(0,"tr")(1,"td",15),t.EFF(2),t.k0s(),t.j41(3,"td",15),t.EFF(4),t.k0s(),t.j41(5,"td",15)(6,"button",32),t.bIt("click",function(){const e=t.eBV(o).$implicit,r=t.XpG();return t.Njj(r.ouvrirAction(e))}),t.nrm(7,"i",33),t.k0s(),t.j41(8,"button",34),t.bIt("click",function(){const e=t.eBV(o).$implicit,r=t.XpG();return t.Njj(r.deleteAction(e.id))}),t.nrm(9,"i",35),t.k0s()()()}if(2&c){const o=v.$implicit;t.R7$(2),t.JRh(o.id),t.R7$(2),t.JRh(o.namepochainaction)}}let _=(()=>{class c{constructor(o,n){this.prochainactionController=o,this.messageService=n,this.prochainactions=[],this.newprochainaction={id:null,namepochainaction:""}}ngOnInit(){this.getActions()}getActions(){this.prochainactionController.getTotalaction().subscribe(o=>{this.prochainactions=o},o=>{this.messageService.add({severity:"error",summary:"Erreur",detail:"Erreur lors du chargement des actions"}),console.error("Erreur lors du chargement des actions",o)})}addAction(){this.prochainactionController.addAction(this.newprochainaction).subscribe(o=>{this.prochainactions.push(o),this.newprochainaction={id:null,namepochainaction:""};const n=document.getElementById("addReclamationModal");n&&(d.aF.getInstance(n)||new d.aF(n)).hide();const e=document.querySelector(".modal-backdrop");e&&e.remove(),document.body.classList.remove("modal-open"),document.body.style.overflow="",document.body.style.paddingRight="",this.messageService.add({severity:"success",summary:"Succ\xe8s",detail:"Action ajout\xe9e avec succ\xe8s"})},o=>{this.messageService.add({severity:"error",summary:"Erreur",detail:"Erreur lors de l'ajout de l'action"}),console.error("Erreur lors de l'ajout de l'action",o)})}ouvrirAction(o){this.newprochainaction={...o},new d.aF(document.getElementById("editReclamationModal")).show()}saveEdit(){this.prochainactionController.updateAction(this.newprochainaction).subscribe(()=>{this.messageService.add({severity:"success",summary:"Succ\xe8s",detail:"Action mise \xe0 jour avec succ\xe8s"}),this.getActions(),d.aF.getInstance(document.getElementById("editReclamationModal")).hide()},o=>{this.messageService.add({severity:"error",summary:"Erreur",detail:"Erreur lors de la mise \xe0 jour de l'action"}),console.error("Erreur lors de la mise \xe0 jour de l'action",o)})}deleteAction(o){confirm("\xcates-vous s\xfbr de vouloir supprimer cette action ?")&&this.prochainactionController.deleteAction(o).subscribe(()=>{this.messageService.add({severity:"success",summary:"Succ\xe8s",detail:"Action supprim\xe9e avec succ\xe8s"}),console.log("Action supprim\xe9e avec succ\xe8s"),this.getActions()},n=>{this.messageService.add({severity:"error",summary:"Erreur",detail:"Erreur lors de la suppression de l'action"}),console.error("Erreur lors de la suppression de l'action",n)})}static{this.\u0275fac=function(n){return new(n||c)(t.rXU(p.$),t.rXU(u.bg))}}static{this.\u0275cmp=t.VBU({type:c,selectors:[["app-prochain-action"]],standalone:!0,features:[t.Jv_([u.bg]),t.aNF],decls:65,vars:3,consts:[["rel","stylesheet","href",t.wXG`https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css`],["rel","stylesheet","href",t.wXG`https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css`],[1,"container"],[1,"row",2,"background-color","rgba(255, 255, 255, 0.8)","border","2px solid #aaaf00","border-radius","10px"],[1,"col-12"],[1,"border","border-1","border-light","bg-white","p-3",2,"border-radius","10px"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],["data-bs-toggle","modal","data-bs-target","#addReclamationModal",1,"btn","btn-primary"],[1,"ms-2"],[1,"bi","bi-plus"],[1,"mb-4"],[1,"col-md-12","col-xl-12"],[1,"card","tbl-card"],[1,"table-responsive"],[1,"table","table-hover","mb-0"],[1,"text-center"],[4,"ngFor","ngForOf"],["id","addReclamationModal","tabindex","-1","aria-labelledby","addReclamationModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","addReclamationModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],["id","reclamationForm"],[1,"mb-3"],["for","reclamationTitle",1,"form-label"],["type","text","id","reclamationTitle","name","txt_reclamation","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"modal-footer"],["type","button","id","saveReclamation",1,"btn","btn-primary",3,"click"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["id","editReclamationModal","tabindex","-1","aria-labelledby","editReclamationModal","aria-hidden","true",1,"modal","fade"],[1,"btn","btn-sm","btn-warning",2,"border-radius","60px",3,"click"],[1,"bi","bi-pencil-square"],[1,"btn","btn-sm","btn-danger","ms-2",2,"border-radius","60px",3,"click"],[1,"bi","bi-x-octagon"]],template:function(n,e){1&n&&(t.nrm(0,"link",0)(1,"link",1)(2,"p-toast"),t.j41(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6)(8,"h3"),t.EFF(9,"Ajouter Prochain Action "),t.k0s(),t.j41(10,"button",7),t.EFF(11," Ajouter "),t.j41(12,"span",8),t.nrm(13,"i",9),t.k0s()()()()()(),t.nrm(14,"div",10),t.j41(15,"div",11)(16,"div",12)(17,"div",13)(18,"table",14)(19,"thead")(20,"tr")(21,"th",15),t.EFF(22,"ID Actions"),t.k0s(),t.j41(23,"th",15),t.EFF(24,"Prochain Actions"),t.k0s(),t.j41(25,"th",15),t.EFF(26,"Actions"),t.k0s()()(),t.j41(27,"tbody"),t.DNE(28,b,10,2,"tr",16),t.k0s()()()()(),t.j41(29,"div",17)(30,"div",18)(31,"div",19)(32,"div",20)(33,"h5",21),t.EFF(34,"Ajouter Prochain Action"),t.k0s(),t.nrm(35,"button",22),t.k0s(),t.j41(36,"div",23)(37,"form",24)(38,"div",25)(39,"label",26),t.EFF(40,"Titre d'action"),t.k0s(),t.j41(41,"input",27),t.mxI("ngModelChange",function(s){return t.DH7(e.newprochainaction.namepochainaction,s)||(e.newprochainaction.namepochainaction=s),s}),t.k0s()()()(),t.j41(42,"div",28)(43,"button",29),t.bIt("click",function(){return e.addAction()}),t.EFF(44,"Ajouter"),t.k0s(),t.j41(45,"button",30),t.EFF(46,"Fermer"),t.k0s()()()()()(),t.j41(47,"div",31)(48,"div",18)(49,"div",19)(50,"div",20)(51,"h5",21),t.EFF(52,"Modifier Prochain Action"),t.k0s(),t.nrm(53,"button",22),t.k0s(),t.j41(54,"div",23)(55,"form",24)(56,"div",25)(57,"label",26),t.EFF(58,"Titre d'action"),t.k0s(),t.j41(59,"input",27),t.mxI("ngModelChange",function(s){return t.DH7(e.newprochainaction.namepochainaction,s)||(e.newprochainaction.namepochainaction=s),s}),t.k0s()()()(),t.j41(60,"div",28)(61,"button",29),t.bIt("click",function(){return e.saveEdit()}),t.EFF(62,"Ajouter"),t.k0s(),t.j41(63,"button",30),t.EFF(64,"Fermer"),t.k0s()()()()()),2&n&&(t.R7$(28),t.Y8G("ngForOf",e.prochainactions),t.R7$(13),t.R50("ngModel",e.newprochainaction.namepochainaction),t.R7$(18),t.R50("ngModel",e.newprochainaction.namepochainaction))},dependencies:[m.MD,m.Sq,a.YN,a.qT,a.me,a.BC,a.cb,a.YS,a.vS,a.cV,h.MB,h.y8]})}}return c})()}}]);